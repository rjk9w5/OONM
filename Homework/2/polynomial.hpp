//////////////////////////////////////////////////////////////////////
/// @file polynomial.hpp
/// @author Ryan John Krattiger
/// @brief File contains declarations for a polynomial class
////////////////////////////////////////////////////////////////////// 

#ifndef POLYNOMIAL_HPP_
#define POLYNOMIAL_HPP_

//////////////////////////////////////////////////////////////////////
/// @class Polynomial
/// @brief Encapsulation of a polynomial
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn Polynomial()
/// @brief Default Constructor for Polynomial object
/// @post Initializes an empty Polynomial object
////////////////////////////////////////////////////////////////////// 

//////////////////////////////////////////////////////////////////////
/// @fn Polynomial(const Polynomial<T>& src)
/// @brief Copy constructor for Polynomial object
/// @post Initializes a copy of Polynomial object
/// @param Polynomial object to be copied
////////////////////////////////////////////////////////////////////// 

//////////////////////////////////////////////////////////////////////
/// @fn operator +=
/// @brief Plus equals operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator +
/// @brief Addition operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator -=
/// @brief Minus equals operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator -
/// @brief Subtraction operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator -
/// @brief Unary negation operator
/// @pre 
/// @post 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator ~
/// @brief Negation operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator ==
/// @brief Equality operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator !=
/// @brief Non-equality operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator =
/// @brief Assignment operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator [] const
/// @brief Bracket accessor
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator []
/// @brief Bracket mutator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn operator ()
/// @brief Functor for polynomial evaluation
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn (friend) operator <<
/// @brief Output operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn (friend) operator >>
/// @brief Input operator
/// @pre 
/// @post 
/// @param 
/// @return 
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
/// @fn (private) polycpy
/// @brief Helper function to copy polynomials safely
/// @pre 
/// @post updates class m_coeff and m_order pointers safely
/// @param pointer to array containing coefficient of nth term
/// @param pointer to array containing order of the nth term
/// @return none
//////////////////////////////////////////////////////////////////////

#include <iostream>
#include <exception>

struct file_error: std::exception
{
  public:
    file_error(){}
    file_error(char* what_msg):
      msg(what_msg),
      line(-1) {}
    file_error(char* what_msg, const int ln):
      msg(what_msg),
      line(ln) {}
    const char* what() const noexcept {return msg;}
    const int onLine() const {return line;}
  private:
    char* msg;
    int line;
};

template <class T>
class Polynomial
{
  public:
    Polynomial();
    Polynomial(const Polynomial<T>& src);
    ~Polynomial();
    
    // Operator Overloads
    Polynomial<T>& operator+=(const Polynomial<T> &rhs);
    Polynomial<T>& operator+(const Polynomial<T> &rhs) const;
    Polynomial<T>& operator-=(const Polynomial<T> &rhs);
    Polynomial<T>& operator-(const Polynomial<T> &rhs) const;
    
    Polynomial<T>& operator-() const;
    Polynomial<T>& operator~() const;
    
    bool operator==(const Polynomial<T> &rhs, const Polynomial<T> &lhs) const;
    bool operator!=(const Polynomial<T> &rhs, const Polynomial<T> &lhs) const;
    
    Polynomial<T>& operator=(const Polynomial<T> &rhs);
    
    T& operator[](const int i);
    const T& operator[](const int i) const;
    T& operator()(const T &x) const;
    
    // Friends
    friend std::ostream& operator<<(std::ostream& out, const Polynomial<T> &p);
    friend std::istream& operator>>(std::istream& in, Polynomial<T> &p);
    
  private:
    int m_nterms;
    autoArray<T> m_coeff; // Holds values of coefficients
    autoArray<T> m_order; // Holds corresponding order of coefficients
    void polycpy(const T* src_order, const T*  src_coeff);
};

#include "polynomial.tpp"

#endif
